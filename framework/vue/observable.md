# 如何实现响应式

通过依赖收集，在依赖变化时获得通知。vue通过`defineReactive`使对象中的某个属性转换为响应式。该方法通过定义对象属性的`getter`以及`setter`获取属性的访问时机，在被获取时将监听者保存，在属性被修改时通知保存的监听者。视图的自动刷新就是通过构造`Render Watcher`并在视图依赖的数据变化时得到通知，进而更新视图。

```js
Object.defineProperty(ob, key, {
  get() {
      // collect watcher
  }
  set() {
      // notify watcher
  }
})
```

通过定义属性的修饰器可以监听属性的变化，但是需要在数据变化前定义好该属性，这使得动态创建、删除属性无法被感知，所以需要通过特殊的`set`和`del`手动触发通知并将新加入的属性转换为响应式。


以上场景只能检测到对象属性被修改，而属性的动态增删以及数组、Map等结构的修改都无法得到通知。

