## HTTP1

0.9版本比较简单，只支持get，并且返回的类型仅支持文本。

1.0版本添加了一些功能：

- 首部
- 响应码
- 重定向
- 错误
- 条件请求
- 压缩
- 更多请求方法

存在一些问题：

- 单个请求单个连接
- 缺少强制host
- 缓存简陋，主要是依赖header中的If-Modiified-Since,Expire(到期)

1.1版本添加了：

- 缓存方面添加了Entity tag(实体标签), If-Unmodified-Since, If-Match, If-None-Match等.
- 可以通过在请求头处设置range头域,就可以返回请求资源的某一部分,也就是返回码为206(Partial Content)的时候,这对于性能优化很有必要.
- 增加错误状态吗
- 虚拟Host
- 长连接和管线化，在一个TCP连接上传输多个http请求和响应，避免频繁建立和关闭TCP连接

## HTTP2

### 目标

解决性能问题

### 方式

- 压缩头部
- 复用TCP连接
- 二进制分帧层

### 二进制分帧层

层指的是将请求进行优化后的编码机制。

## HTTPS

在http和tcp之间建立一个加密层（SSL/TLS   Transport Layer Security ）。 port: 443

### 基本运行过程

采用公钥加密法，客户端通过获取服务器公钥，用公钥加密信息，服务器通过自己的私钥解密。
  1. 如何保证公钥不被篡改？
      将公钥放在数字证书中，只要证书可信，公钥就可信
  2. 公钥加密计算量太大？
      每次对话，客户端都利用非对称加密来生成对称加密的密钥，通过对称加密进行通信减少了运算的成本。

客户端索要并验证公钥 -> 双方协商生成“对话密钥” -> 双方采用“对话密钥”进行加密通信

前两步称为握手：

1. 客户端发送“ClientHello”，包含协议版本、随机数、加密方法和压缩方法
2. 服务端回复“ServerHello”确定加密通信协议版本，随机数、加密方法以及服务器证书
3. 客户端验证证书，确定使用则发送随机数、编码改变通知以及所有内容的hash值以供校验，如果服务器请求客户端证书，则一同发送
4. 服务端获得第三个随机数后生成会话密钥，发送编码改变通知以及内容的hash值以供校验。握手结束。

公钥系统：
1. CA（数字证书认证机构）将用户个人身份和公开密钥连接在一起。

### 常见状态码

- 500 内部服务器错误
服务器遇到错误，无法完成请求
- 501 未实现
Web 服务器不支持实现此请求所需功能。
- 502 无效网关
服务器作为网关或代码，从上游服务器收到无效响应
- 503 服务不可用
服务器当前无法使用。通常只是暂时状态
- 404 文件未找到
服务器找不到请求的网页
- 403 禁止访问
服务器拒绝请求
- 400 请求错误
服务器不理解请求的语法
- 401 未经授权
请求要求身份验证
- 200 请求成功
服务器成功处理了请求。
- 201 已创建
请求成功并且服务器创建了新的资源
- 206 部分内容
服务器成功处理了部分GET请求
- 301 永久重定向
- 302 临时重定向
- 304 资源没有被修改